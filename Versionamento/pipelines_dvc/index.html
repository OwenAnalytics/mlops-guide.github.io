
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="MLOps Guide introducing concepts and application using DVC, CML, IBM Watson Machine Learning, IBM Watson OpenScale, Terraform and Cookiecutter. Learn how to implement MLOps.">
      
      
      
        <meta name="author" content="Arthur Olga, Gabriel Monteiro, Guilherme Leite, Vinicius Lima">
      
      
        <link rel="canonical" href="https://mlops-guide.github.io/Versionamento/pipelines_dvc/">
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>Working with Pipelines - MLOps Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../ASCII_cinema/asciinema-player.css">
    
      <link rel="stylesheet" href="../../_css/extra_css.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="orange">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#working-with-pipelines" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MLOps Guide" class="md-header__button md-logo" aria-label="MLOps Guide" data-md-component="logo">
      
  <img src="../../assets/logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MLOps Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Working with Pipelines
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M9.598 1.591a.75.75 0 0 1 .785-.175 7 7 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786zm1.616 1.945a7 7 0 0 1-7.678 7.678 5.5 5.5 0 1 0 7.678-7.678z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 10.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zM8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0zm0 13a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13zM2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.75.75 0 0 1-1.06 1.06l-1.06-1.06a.75.75 0 0 1 0-1.06zm9.193 9.193a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061zM16 8a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8zM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8zm10.657-5.657a.75.75 0 0 1 0 1.061l-1.061 1.06a.75.75 0 1 1-1.06-1.06l1.06-1.06a.75.75 0 0 1 1.06 0zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/mlops-guide/mlops-guide.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    mlops-guide
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MLOps Guide" class="md-nav__button md-logo" aria-label="MLOps Guide" data-md-component="logo">
      
  <img src="../../assets/logo-white.png" alt="logo">

    </a>
    MLOps Guide
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/mlops-guide/mlops-guide.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    mlops-guide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        Contents
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Principles of MLOps
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Principles of MLOps" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Principles of MLOps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../MLOps/Data/" class="md-nav__link">
        Versioning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../MLOps/PipelineAutomation/" class="md-nav__link">
        Automation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../MLOps/FeatureStore/" class="md-nav__link">
        Feature Storing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../MLOps/CICDML/" class="md-nav__link">
        CI/CD for Machine Learning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../MLOps/Monitoring/" class="md-nav__link">
        Continuous Monitoring
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        Implementation Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Implementation Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Implementation Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      <label class="md-nav__link" for="__nav_4_1">
        Introduction
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Introduction" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Structure/project_structure/" class="md-nav__link">
        Tools and Project Structure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Structure/starting/" class="md-nav__link">
        Starting a New Project with Cookiecutter
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        Environment
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Environment" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Infraestrutura/Auth/" class="md-nav__link">
        IAM Access
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Infraestrutura/Terraform/" class="md-nav__link">
        Setting Up the IBM Environment with Terraform
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Infraestrutura/Python/" class="md-nav__link">
        Managing the deployment space
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" checked>
      
      <label class="md-nav__link" for="__nav_4_3">
        Versioning
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Versioning" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Versioning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        What is DVC?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../basic_dvc/" class="md-nav__link">
        Data Versioning
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Working with Pipelines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Working with Pipelines
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-pipelines" class="md-nav__link">
    Creating pipelines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-metrics" class="md-nav__link">
    Saving metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-the-experiment" class="md-nav__link">
    Control the experiment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reproducibility" class="md-nav__link">
    Reproducibility
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/" class="md-nav__link">
        Deployment with Watson Machine Learning
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      <label class="md-nav__link" for="__nav_4_5">
        CI/CD for Machine Learning
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="CI/CD for Machine Learning" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          CI/CD for Machine Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../CICD/tests/" class="md-nav__link">
        Implementing Tests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../CICD/cml_testing/" class="md-nav__link">
        Continuous Integration with CML and Github Actions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../CICD/cml_deploy/" class="md-nav__link">
        Continous Delivery with CML, Github Actions and Watson ML
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Openscale/" class="md-nav__link">
        Monitoring with IBM OpenScale
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Workflow/" class="md-nav__link">
        Project Workflow
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-pipelines" class="md-nav__link">
    Creating pipelines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-metrics" class="md-nav__link">
    Saving metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-the-experiment" class="md-nav__link">
    Control the experiment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reproducibility" class="md-nav__link">
    Reproducibility
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/mlops-guide/mlops-guide.github.io/tree/main/docs/Versionamento/pipelines_dvc.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="working-with-pipelines">Working with Pipelines</h1>
<p>After learning how to version data or models using DVC it's time to build your experiment pipeline.</p>
<p>Let's assume that we are using the last section dataset as a data source for training a classification model. Let's also consider that we have three stages in this experiment:</p>
<ul>
<li>Preprocessing your data(extract features...)</li>
<li>Train the model</li>
<li>Evaluate the model</li>
</ul>
<p>Here you should have in hands our scripts: <a href="https://github.com/mlops-guide/dvc-gitactions/tree/master/src"><strong>preprocess.py</strong>, <strong>train.py</strong>, <strong>evaluate.py</strong> and <strong>model.py</strong></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Just as in the last section, we will use the help of the <a href="https://github.com/mlops-guide/dvc-gitactions">template repository</a> to explain and build DVC's pipelines. Feel free to use your scripts and create specific pipelines for your project needs.</p>
</div>
<h2 id="creating-pipelines">Creating pipelines</h2>
<p>DVC builds a pipeline based on three components: Inputs, Outputs, and Command. So for the preprocessing stage, this would look like this:</p>
<ul>
<li>Inputs: weatherAUS.csv.csv and preprocess.py script</li>
<li>Outputs: weatherAUS_processed.csv</li>
<li>Command: python preprocess.py weatherAUS.csv</li>
</ul>
<p>So to create this stage of preprocessing, we use <code>dvc run</code>:</p>
<div class="highlight"><pre><span></span><code>dvc run -n preprocess <span class="se">\</span>
  -d ./src/preprocess_data.py -d data/weatherAUS.csv <span class="se">\</span>
  -o ./data/weatherAUS_processed.csv <span class="se">\</span>
  python3 ./src/preprocess_data.py ./data/weatherAUS.csv
</code></pre></div>
<p>We named this stage "preprocess" by using the flag <code>-n</code>. We also defined this stage inputs with the flag <code>-d</code> and the outputs with the flag <code>-o</code>. The command will always be the last piece of <code>dvc run</code> without any flag.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Output files are added to DVC control when reproducing a DVC stage. When finalizing your experiment remember to use <code>dvc push</code> to version not only the data used but those outputs generated from the experiment.</p>
</div>
<p>The train stages would also be created using <code>dvc run</code>:</p>
<div class="highlight"><pre><span></span><code>dvc run -n train <span class="se">\</span>
  -d ./src/train.py -d ./data/weatherAUS_processed.csv -d ./src/model.py <span class="se">\</span>
  -o ./models/model.joblib <span class="se">\</span>
  python3 ./src/train.py ./data/weatherAUS_processed.csv ./src/model.py <span class="m">200</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The number <strong>200</strong> at <code>dvc run</code> above is related to our script function. If your are using your own script just ignore it.</p>
</div>
<p>At this point, you might have noticed that two new files were created: <strong>dvc.yaml</strong> and <strong><em>dvc.lock</em></strong>.  The first one will be responsible for saving what was described in each <code>dvc run</code> command. So if you wanna create or change a specific stage, it's possible to just edit <strong><em>dvc.yaml</em></strong> . Our current file would look like this:</p>
<div class="highlight"><pre><span></span><code><span class="nt">stages</span><span class="p">:</span>
  <span class="nt">preprocess</span><span class="p">:</span>
    <span class="nt">cmd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python3 ./src/preprocess_data.py ./data/weatherAUS.csv</span>
    <span class="nt">deps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./src/preprocess_data.py</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">data/weatherAUS.csv</span>
    <span class="nt">outs</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./data/weatherAUS_processed.csv</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./data/features.csv</span>
  <span class="nt">train</span><span class="p">:</span>
    <span class="nt">cmd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python3 ./src/train.py ./data/weatherAUS_processed.csv ./src/model.py 200</span>
    <span class="nt">deps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./data/weatherAUS_processed.csv</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./src/model.py</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./src/train.py</span>
    <span class="nt">outs</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./models/model.joblib</span>
</code></pre></div>
<p>The second file created is <strong><em>dvc.lock</em></strong>. This is also a YAML file and its function is similar to <strong><em>.dvc</em></strong> files. Inside, we can find the path and a hash code for each file of each stage so DVC can track changes. Tracking these changes is important because now DVC will know when a stage needs to be rerun or not.</p>
<p>Your currently pipeline looks likes this:</p>
<p><img alt="half" src="../../assets/dvc/half_pipeline.png" /></p>
<h2 id="saving-metrics">Saving metrics</h2>
<p>Finally, let's create our last stage so we can evaluate our model:</p>
<div class="highlight"><pre><span></span><code>dvc run -n evaluate -d ./src/evaluate.py -d ./data/weatherAUS_processed.csv <span class="se">\</span>
  -d ./src/model.py -d ./models/model.joblib <span class="se">\</span>
  -M ./results/metrics.json <span class="se">\</span>
  -o ./results/precision_recall_curve.png -o ./results/roc_curve.png <span class="se">\</span>
  python3 ./src/evaluate.py ./data/weatherAUS_processed.csv ./src/model.py ./models/model.joblib
</code></pre></div>
<p>You might notice that we are using the -M flag instead of the -o flag. This is important because now we can keep the metrics generated by every experiment. If we run <code>dvc metrics show</code> we can see how good was the experiment:</p>
<div class="highlight"><pre><span></span><code>$ dvc metrics show
Path                  accuracy    f1       precision    recall        
results/metrics.json  <span class="m">0</span>.84973     <span class="m">0</span>.90747  <span class="m">0</span>.8719       <span class="m">0</span>.94607
</code></pre></div>
<p>Another import command is if we want to compare this experiment made in our branch to the model in production at the main branch we can do this by running <code>dvc metrics diff</code>:</p>
<div class="highlight"><pre><span></span><code>$ dvc metrics diff
Path                  Metric     Old      New      Change             
results/metrics.json  accuracy   <span class="m">0</span>.84643  <span class="m">0</span>.84973  <span class="m">0</span>.0033
results/metrics.json  f1         <span class="m">0</span>.9074   <span class="m">0</span>.90747  8e-05
results/metrics.json  precision  <span class="m">0</span>.85554  <span class="m">0</span>.8719   <span class="m">0</span>.01636
results/metrics.json  recall     <span class="m">0</span>.96594  <span class="m">0</span>.94607  -0.01987
</code></pre></div>
<p>The metrics configuration is saved at the <strong><em>dvc.yaml</em></strong> file.</p>
<h2 id="control-the-experiment">Control the experiment</h2>
<p>So now we have built a full machine learning experiment with three pipelines: </p>
<p><img alt="complete" src="../../assets/dvc/complete_pipeline.png" /></p>
<p>DVC uses a Direct Acyclic Graph(DAG) to organize the relationships and dependencies between pipelines. This is very useful for visualizing the experiment process, especially when sharing it with your team. You can check the DAG just by running <code>dvc dag</code>:</p>
<div class="highlight"><pre><span></span><code>$ dvc dag

 +-------------------------+  
 <span class="p">|</span> data/weatherAUS.csv.dvc <span class="p">|</span>  
 +-------------------------+  
               *              
               *              
               *              
        +------------+        
        <span class="p">|</span> preprocess <span class="p">|</span>        
        +------------+        
         **        **         
       **            **       
      *                **     
+-------+                *    
<span class="p">|</span> train <span class="p">|</span>              **     
+-------+            **       
         **        **         
           **    **           
             *  *             
         +----------+         
         <span class="p">|</span> evaluate <span class="p">|</span>         
         +----------+   
</code></pre></div>
<p>If you want to check any changes to the project's pipelines, just run:</p>
<div class="highlight"><pre><span></span><code>$ dvc status
</code></pre></div>
<h2 id="reproducibility">Reproducibility</h2>
<p>Either if you changed one stage and need to run it again or if you are reproducing someone's experiment for the first time, DVC helps you with that:</p>
<p>Run this to reproduce the whole experiment:</p>
<div class="highlight"><pre><span></span><code>$ dvc repro
</code></pre></div>
<p>Or if you want just to reproduce one of the stages, just let DVC know that by:</p>
<div class="highlight"><pre><span></span><code>$ dvc repro stage_name
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you are using <code>dvc repro</code> for a second time, DVC will reproduce only those stages that changes have been made.</p>
</div>
<hr />
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../basic_dvc/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Data Versioning" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Data Versioning
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Deployment/" class="md-footer__link md-footer__link--next" aria-label="Next: Deployment with Watson Machine Learning" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Deployment with Watson Machine Learning
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.extend"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
        <script src="../../ASCII_cinema/asciinema-player.js"></script>
      
        <script src="../../_js/extra_js.js"></script>
      
    
  </body>
</html>